<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis16个常见使用场景 | Rui</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vuepress-blog/assets/img/logo.png">
    <link rel="manifest" href="/vuepress-blog/manifest.json">
    <link rel="apple-touch-icon" href="/vuepress-blog/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/vuepress-blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="点点滴滴">
    <meta name="referrer" content="no-referrer">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.9508d0de.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.6697dc51.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.467e751d.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.cda9c0e5.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/161.f484bb49.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/59.8ba32256.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.9df6826b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/100.2939d3c7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/101.6bd40fa9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/102.1af9c925.js"><link rel="prefetch" href="/vuepress-blog/assets/js/103.52ff331f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/104.7bb3c948.js"><link rel="prefetch" href="/vuepress-blog/assets/js/105.5ffd55d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/106.e133dad0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/107.14d78c67.js"><link rel="prefetch" href="/vuepress-blog/assets/js/108.78caba80.js"><link rel="prefetch" href="/vuepress-blog/assets/js/109.660abecf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.368420d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/110.0fb8cbeb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/111.2917c0b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/112.84544da2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/113.cde653ae.js"><link rel="prefetch" href="/vuepress-blog/assets/js/114.3671b35c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/115.77b223b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/116.b77d20d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/117.5030ac8b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/118.08869827.js"><link rel="prefetch" href="/vuepress-blog/assets/js/119.39cffb28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.d770cf21.js"><link rel="prefetch" href="/vuepress-blog/assets/js/120.02bc2269.js"><link rel="prefetch" href="/vuepress-blog/assets/js/121.a9da768b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/122.e2d1d0fb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/123.2567d4e4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/124.15c8eb5a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/125.538ffe58.js"><link rel="prefetch" href="/vuepress-blog/assets/js/126.8478ba08.js"><link rel="prefetch" href="/vuepress-blog/assets/js/127.e3c7574c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/128.642b6500.js"><link rel="prefetch" href="/vuepress-blog/assets/js/129.d5a02872.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.536f1c84.js"><link rel="prefetch" href="/vuepress-blog/assets/js/130.fefa389a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/131.380a793a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/132.96ca68a7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/133.fe9f8d27.js"><link rel="prefetch" href="/vuepress-blog/assets/js/134.e84d9ac1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/135.5ff26dcd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/136.60c7f810.js"><link rel="prefetch" href="/vuepress-blog/assets/js/137.5cfe88c1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/138.19dcb51f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/139.d8c8b4f7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.2d976b16.js"><link rel="prefetch" href="/vuepress-blog/assets/js/140.81776120.js"><link rel="prefetch" href="/vuepress-blog/assets/js/141.1a0d7b43.js"><link rel="prefetch" href="/vuepress-blog/assets/js/142.acbba6ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/143.5c3aa373.js"><link rel="prefetch" href="/vuepress-blog/assets/js/144.fd28909f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/145.665c920b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/146.9685a2aa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/147.9c8ff4c4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/148.69992754.js"><link rel="prefetch" href="/vuepress-blog/assets/js/149.31811fb5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.4cd37087.js"><link rel="prefetch" href="/vuepress-blog/assets/js/150.a2c91858.js"><link rel="prefetch" href="/vuepress-blog/assets/js/151.e990c3a9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/152.6ec66390.js"><link rel="prefetch" href="/vuepress-blog/assets/js/153.81d78d03.js"><link rel="prefetch" href="/vuepress-blog/assets/js/154.a7da1e4c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/155.c54ade81.js"><link rel="prefetch" href="/vuepress-blog/assets/js/156.7450bdb3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/157.b70c64df.js"><link rel="prefetch" href="/vuepress-blog/assets/js/158.2a9765d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/159.b86e8e96.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.0723f956.js"><link rel="prefetch" href="/vuepress-blog/assets/js/160.52a3ea0e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/162.39bdc285.js"><link rel="prefetch" href="/vuepress-blog/assets/js/163.a4079657.js"><link rel="prefetch" href="/vuepress-blog/assets/js/164.1cb145c2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/165.89a91a54.js"><link rel="prefetch" href="/vuepress-blog/assets/js/166.994211ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/167.ab764abb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/168.db6c6035.js"><link rel="prefetch" href="/vuepress-blog/assets/js/169.e8c7aa03.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.30b8f6d4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/170.e703ac81.js"><link rel="prefetch" href="/vuepress-blog/assets/js/171.6ae58a67.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.9c9c4048.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.34569e07.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.765cc5a4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.e218b3a7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.13267497.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.1a6e2c8c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.ead733e7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.51c198d4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.b45745a2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.4ad95b1c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.b220c8b3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.26598043.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.277b5484.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.9365e3ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.e595efb3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.0214b007.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.5d2225d5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.41a62c38.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.55dfc8ef.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.d178e1d0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.869ae203.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.f2198b44.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.3f13a926.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.14611c33.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.286fce68.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.5d578d26.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.92657678.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.23546e68.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.90df89e6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.bf7b2c7b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.3eec9cb4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.5ee80f32.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.27898111.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.9c25ea8f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.a497b197.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.cbc24efc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.f4eeba79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.ff96be4e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.4afa38f6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.d330947c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.fecac826.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.90269675.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.3786d183.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.c890f712.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.8a3eb4fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.8bd23158.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.55f5c8c2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.cd6dab9f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.11922ac4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.b3ce32cd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.090f2655.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.93105e51.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.98e26a10.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.4dadcf39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.55ed94b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/7.c3e04b24.js"><link rel="prefetch" href="/vuepress-blog/assets/js/70.dd87a105.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.55c90d02.js"><link rel="prefetch" href="/vuepress-blog/assets/js/72.43913522.js"><link rel="prefetch" href="/vuepress-blog/assets/js/73.e1b3bdc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/74.00f41927.js"><link rel="prefetch" href="/vuepress-blog/assets/js/75.ecae49d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/76.06226909.js"><link rel="prefetch" href="/vuepress-blog/assets/js/77.d36bfeda.js"><link rel="prefetch" href="/vuepress-blog/assets/js/78.34d24214.js"><link rel="prefetch" href="/vuepress-blog/assets/js/79.a969ab00.js"><link rel="prefetch" href="/vuepress-blog/assets/js/80.334679eb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/81.34c6166d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/82.42f666c0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/83.7e0c9625.js"><link rel="prefetch" href="/vuepress-blog/assets/js/84.9fe43689.js"><link rel="prefetch" href="/vuepress-blog/assets/js/85.6adbfec4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/86.440421bb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/87.2210e22d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/88.6958ba15.js"><link rel="prefetch" href="/vuepress-blog/assets/js/89.035a944a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/90.7739be30.js"><link rel="prefetch" href="/vuepress-blog/assets/js/91.c8faf686.js"><link rel="prefetch" href="/vuepress-blog/assets/js/92.92b016df.js"><link rel="prefetch" href="/vuepress-blog/assets/js/93.fb517158.js"><link rel="prefetch" href="/vuepress-blog/assets/js/94.129f9e80.js"><link rel="prefetch" href="/vuepress-blog/assets/js/95.ee218f1b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/96.5c47739c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/97.34d539f1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/98.de767ddd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/99.d7897b52.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.146bbb4c.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.9508d0de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><img src="/vuepress-blog/assets/img/logo.png" alt="Rui" class="logo"> <span class="site-name can-hide">Rui</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/navigation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/study-notes/" class="nav-link router-link-active">
  面经
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/preparation-exams/" class="nav-link">
  备考
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/mybatis/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/drawing-bed/" class="nav-link">
  图床
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/front-end/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码Demo" class="dropdown-title"><span class="title">代码Demo</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码Demo" class="mobile-dropdown-title"><span class="title">代码Demo</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/back-end-code/" class="nav-link">
  后端Demo
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/front-end-code/" class="nav-link">
  前端Demo
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/other.html" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂记" class="mobile-dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/friendly-chain/" class="nav-link">
  友链
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/read/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/aboutme/" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/other/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/navigation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/study-notes/" class="nav-link router-link-active">
  面经
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/preparation-exams/" class="nav-link">
  备考
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/mybatis/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/drawing-bed/" class="nav-link">
  图床
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/front-end/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/blog-article/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码Demo" class="dropdown-title"><span class="title">代码Demo</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码Demo" class="mobile-dropdown-title"><span class="title">代码Demo</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/back-end-code/" class="nav-link">
  后端Demo
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/front-end-code/" class="nav-link">
  前端Demo
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/code-demo/other.html" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂记" class="mobile-dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/friendly-chain/" class="nav-link">
  友链
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/read/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/aboutme/" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/other/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/vuepress-blog/study-notes/back-end/" class="sidebar-heading clickable router-link-active open"><span>后端</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/vuepress-blog/study-notes/back-end/java/" class="sidebar-heading clickable"><span>Java</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/vuepress-blog/study-notes/back-end/redis/" class="sidebar-heading clickable router-link-active open"><span>Redis</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>1.redis入门概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>2.Redis安装配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>3.redis10大数据类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>4.Redis持久化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>5.Redis事务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>6.Redis管道</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>7.Redis发布订阅</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>8.Redis复制(replica)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>9.Redis哨兵(sentinel)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>10.Redis集群(cluster)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>11.SpringBoot集成Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html" aria-current="page" class="active sidebar-link">Redis16个常见使用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_1-缓存" class="sidebar-link">1. 缓存</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_2-数据共享分布式" class="sidebar-link">2. 数据共享分布式</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_3、分布式锁" class="sidebar-link">3、分布式锁</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_4、全局id" class="sidebar-link">4、全局ID</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_5、计数器" class="sidebar-link">5、计数器</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_6、限流" class="sidebar-link">6、限流</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_7、位统计" class="sidebar-link">7、位统计</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_8-时间轴-timeline" class="sidebar-link">8. 时间轴（Timeline）</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_9-消息队列" class="sidebar-link">9. 消息队列</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_10、抽奖" class="sidebar-link">10、抽奖</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_11、点赞、签到、打卡" class="sidebar-link">11、点赞、签到、打卡</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_12-商品标签" class="sidebar-link">12 商品标签</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_13、好友关系、用户关注、推荐模型" class="sidebar-link">13、好友关系、用户关注、推荐模型</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_14-排行榜" class="sidebar-link">14 .排行榜</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_15-倒排索引" class="sidebar-link">15 .倒排索引</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-16-common-usage-scenarios.html#_16-显示最新的项目列表" class="sidebar-link">16 .显示最新的项目列表</a></li></ul></li><li><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-install-deployment.html" class="sidebar-link">Window下Redis的安装和部署详细图文教程（Redis的安装和可视化工具的使用）</a></li><li><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-use.html" class="sidebar-link">看完这篇大总结，彻底掌握Redis的使用</a></li></ul></section></li></ul></section></li><li><a href="/vuepress-blog/study-notes/back-end/python/" class="sidebar-link">Python</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/study-notes/front-end/" class="sidebar-heading clickable"><span>前端</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/study-notes/common/" class="sidebar-heading clickable"><span>公共</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-缓存">1. 缓存</a></li><li><a href="#_2-数据共享分布式">2. 数据共享分布式</a></li><li><a href="#_3、分布式锁">3、分布式锁</a></li><li><a href="#_4、全局id">4、全局ID</a></li><li><a href="#_5、计数器">5、计数器</a></li><li><a href="#_6、限流">6、限流</a></li><li><a href="#_7、位统计">7、位统计</a></li><li><a href="#_8-时间轴-timeline">8. 时间轴（Timeline）</a></li><li><a href="#_9-消息队列">9. 消息队列</a></li><li><a href="#_10、抽奖">10、抽奖</a></li><li><a href="#_11、点赞、签到、打卡">11、点赞、签到、打卡</a></li><li><a href="#_12-商品标签">12 商品标签</a></li><li><a href="#_13、好友关系、用户关注、推荐模型">13、好友关系、用户关注、推荐模型</a></li><li><a href="#_14-排行榜">14 .排行榜</a></li><li><a href="#_15-倒排索引">15 .倒排索引</a></li><li><a href="#_16-显示最新的项目列表">16 .显示最新的项目列表</a></li></ul></div><p></p> <h1 id="redis-16-个常见使用场景"><a href="#redis-16-个常见使用场景" class="header-anchor">#</a> Redis 16 个常见使用场景</h1> <h2 id="_1-缓存"><a href="#_1-缓存" class="header-anchor">#</a> 1. 缓存</h2> <p>DB缓存，减轻DB服务器压力
提高系统响应
作为Key-Value形态的内存数据库，Redis 最先会被想到的应用场景便是作为数据缓存。而使用 Redis 缓存数据非常简单，只需要通过string类型将序列化后的对象存起来即可，不过也有一些需要注意的地方：</p> <p>必须保证不同对象的 key 不会重复，并且使 key 尽量短，一般使用类名（表名）加主键拼接而成。</p> <p>选择一个优秀的序列化方式也很重要，目的是提高序列化的效率和减少内存占用。</p> <p>缓存内容与数据库的一致性，这里一般有两种做法：</p> <p>只在数据库查询后将对象放入缓存，如果对象发生了修改或删除操作，直接清除对应缓存（或设为过期）。
在数据库新增和查询后将对象放入缓存，修改后更新缓存，删除后清除对应缓存（或设为过期）。</p> <h2 id="_2-数据共享分布式"><a href="#_2-数据共享分布式" class="header-anchor">#</a> 2. 数据共享分布式</h2> <p>String 类型，因为 Redis 是分布式的独立服务，可以在多个应用之间共享</p> <p>例如：分布式Session</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>session<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>session<span class="token operator">-</span>data<span class="token operator">-</span>redis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3、分布式锁"><a href="#_3、分布式锁" class="header-anchor">#</a> 3、分布式锁</h2> <p>如今都是分布式的环境下java自带的单体锁已经不适用的。在 Redis 2.6.12 版本开始，string的set命令增加了一些参数：</p> <p>EX：设置键的过期时间（单位为秒）</p> <p>PX：设置键的过期时间（单位为毫秒）</p> <p>NX ：只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。</p> <p>XX ：只在键已经存在时，才对键进行设置操作。</p> <p>由于这个操作是原子性的，可以简单地以此实现一个分布式的锁，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> lock_key locked NX EX <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果这个操作返回false，说明 key
的添加不成功，也就是当前有人在占用这把锁。而如果返回true，则说明得了锁，便可以继续进行操作，并且在操作后通过del命令释放掉锁。并且即使程序因为某些原因并没有释放锁，由于设置了过期时间，该锁也会在 1
秒后自动释放，不会影响到其他程序的运行。</p> <p>推荐使用 redisson 第三方库实现分布式锁。
参考 java分布式锁终极解决方案之 redisson</p> <h2 id="_4、全局id"><a href="#_4、全局id" class="header-anchor">#</a> 4、全局ID</h2> <p>int类型，incrby，利用原子性</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>incrby userid <span class="token number">1000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>分库分表的场景，一次性拿一段</p> <h2 id="_5、计数器"><a href="#_5、计数器" class="header-anchor">#</a> 5、计数器</h2> <p>int类型，incr方法</p> <p>例如：文章的阅读量、微博点赞数、允许一定的延迟，先写入Redis再定时同步到数据库</p> <p>计数功能应该是最适合 Redis 的使用场景之一了，因为它高频率读写的特征可以完全发挥 Redis 作为内存数据库的高效。在 Redis 的数据结构中，string、hash和sorted
set都提供了incr方法用于原子性的自增操作，下面举例说明一下它们各自的使用场景：</p> <p>如果应用需要显示每天的注册用户数，便可以使用string作为计数器，设定一个名为REGISTERED_COUNT_TODAY的 key，并在初始化时给它设置一个到凌晨 0 点的过期时间，每当用户注册成功后便使用incr命令使该 key 增长
1，同时当每天凌晨 0 点后，这个计数器都会因为 key 过期使值清零。
每条微博都有点赞数、评论数、转发数和浏览数四条属性，这时用hash进行计数会更好，将该计数器的 key 设为weibo:weibo_id，hash的 field
为like_number、comment_number、forward_number和view_number，在对应操作后通过hincrby使hash 中的 field 自增。
如果应用有一个发帖排行榜的功能，便选择sorted set吧，将集合的 key 设为POST_RANK。当用户发帖后，使用zincrby将该用户 id 的 score 增长 1。sorted
set会重新进行排序，用户所在排行榜的位置也就会得到实时的更新。</p> <h2 id="_6、限流"><a href="#_6、限流" class="header-anchor">#</a> 6、限流</h2> <p>int类型，incr方法</p> <p>以访问者的ip和其他信息作为key，访问一次增加一次计数，超过次数则返回false</p> <h2 id="_7、位统计"><a href="#_7、位统计" class="header-anchor">#</a> 7、位统计</h2> <p>String类型的bitcount（1.6.6的bitmap数据结构介绍）</p> <p>字符是以8位二进制存储的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> k1 a
setbit k1 <span class="token number">6</span> <span class="token number">1</span>
setbit k1 <span class="token number">7</span> <span class="token number">0</span>
get k1
/* <span class="token number">6</span> <span class="token number">7</span> 代表的a的二进制位的修改
a 对应的ASCII码是97，转换为二进制数据是01100001
b 对应的ASCII码是98，转换为二进制数据是01100010

因为bit非常节省空间（1 <span class="token assign-left variable">MB</span><span class="token operator">=</span><span class="token number">8388608</span> bit），可以用来做大数据量的统计。
*/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>参考 <a href="https://blog.csdn.net/agonie201218/article/details/107161106" target="_blank" rel="noopener noreferrer">使用Redis的bitmaps统计用户留存率、活跃用户<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/agonie201218/article/details/108988577" target="_blank" rel="noopener noreferrer">用户日活月活怎么统计 - Redis HyperLogLog 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_8-时间轴-timeline"><a href="#_8-时间轴-timeline" class="header-anchor">#</a> 8. 时间轴（Timeline）</h2> <p>list作为双向链表，不光可以作为队列使用。如果将它用作栈便可以成为一个公用的时间轴。当用户发完微博后，都通过lpush将它存放在一个 key 为LATEST_WEIBO的list中，之后便可以通过lrange取出当前最新的微博。</p> <h2 id="_9-消息队列"><a href="#_9-消息队列" class="header-anchor">#</a> 9. 消息队列</h2> <p>Redis 中list的数据结构实现是双向链表，所以可以非常便捷的应用于消息队列（生产者 / 消费者模型）。消息的生产者只需要通过lpush将消息放入
list，消费者便可以通过rpop取出该消息，并且可以保证消息的有序性。如果需要实现带有优先级的消息队列也可以选择sorted set。而pub/sub功能也可以用作发布者 / 订阅者模型的消息。无论使用何种方式，由于 Redis
拥有持久化功能，也不需要担心由于服务器故障导致消息丢失的情况。</p> <p>List提供了两个阻塞的弹出操作：blpop/brpop，可以设置超时时间</p> <p>blpop：blpop key1 timeout 移除并获取列表的第一个元素，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
brpop：brpop key1 timeout 移除并获取列表的最后一个元素，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
上面的操作。其实就是java的阻塞队列。学习的东西越多。学习成本越低</p> <p>队列：先进先除：rpush blpop，左头右尾，右边进入队列，左边出队列
栈：先进后出：rpush brpop</p> <h2 id="_10、抽奖"><a href="#_10、抽奖" class="header-anchor">#</a> 10、抽奖</h2> <p>利用set结构的无序性,通过 Spop（ Redis Spop 命令用于移除集合中的指定 key 的一个或多个随机元素，移除后会返回移除的元素。 ） 随机获得值</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;three&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SPOP myset
<span class="token string">&quot;one&quot;</span>
redis<span class="token operator">&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
   redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;four&quot;</span>
   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
   redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;five&quot;</span>
   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
   redis<span class="token operator">&gt;</span> SPOP myset <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;five&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
   redis<span class="token operator">&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
   redis<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_11、点赞、签到、打卡"><a href="#_11、点赞、签到、打卡" class="header-anchor">#</a> 11、点赞、签到、打卡</h2> <p>假如上面的微博ID是t1001，用户ID是u3001</p> <p>用 like:t1001 来维护 t1001 这条微博的所有点赞用户</p> <ol><li>点赞了这条微博：sadd like:t1001 u3001</li> <li>取消点赞：srem like:t1001 u3001</li> <li>是否点赞：sismember like:t1001 u3001</li> <li>点赞的所有用户：smembers like:t1001</li> <li>点赞数：scard like:t1001
是不是比数据库简单多了。</li></ol> <h2 id="_12-商品标签"><a href="#_12-商品标签" class="header-anchor">#</a> 12 商品标签</h2> <p>老规矩，用 tags:i5001 来维护商品所有的标签。</p> <ol><li>sadd tags:i5001 画面清晰细腻</li> <li>sadd tags:i5001 真彩清晰显示屏</li> <li>sadd tags:i5001 流程至极</li></ol> <h2 id="_13、好友关系、用户关注、推荐模型"><a href="#_13、好友关系、用户关注、推荐模型" class="header-anchor">#</a> 13、好友关系、用户关注、推荐模型</h2> <p>这个场景最开始是是一篇介绍微博 Redis 应用的 PPT 中看到的，其中提到微博的 Redis 主要是用在在计数和好友关系两方面上，当时对好友关系方面的用法不太了解，后来看到《Redis 设计与实现》中介绍到作者最开始去使用 Redis
便是希望能通过set解决传统数据库无法快速计算集合中交集这个功能。后来联想到微博当前的业务场景，确实能够以这种方式实现，所以姑且猜测一下：</p> <p>对于一个用户 A，将它的关注和粉丝的用户 id 都存放在两个 set 中：</p> <ol><li>A:follow：存放 A 所有关注的用户 id</li> <li>A:follower：存放 A 所有粉丝的用户 id</li></ol> <p>那么通过sinter命令便可以根据A:follow和A:follower的交集得到与 A 互相关注的用户。当 A 进入另一个用户 B 的主页后，A:follow和B:follow的交集便是 A 和 B 的共同专注，A:follow和B:
follower的交集便是 A 关注的人也关注了 B。</p> <p>举例
follow 关注 fans 粉丝</p> <p>相互关注：</p> <ol><li><p>sadd 1:follow 2</p></li> <li><p>sadd 2:fans 1</p></li> <li><p>sadd 1:fans 2</p></li> <li><p>sadd 2:follow 1
我关注的人也关注了他(取交集)：</p></li> <li><p>sinter 1:follow 2:fans
可能认识的人：</p></li> <li><p>用户1可能认识的人(差集)：sdiff 2:follow 1:follow</p></li> <li><p>用户2可能认识的人：sdiff 1:follow 2:follow</p></li></ol> <h2 id="_14-排行榜"><a href="#_14-排行榜" class="header-anchor">#</a> 14 .排行榜</h2> <p>使用sorted set(有序set)
和一个计算热度的算法便可以轻松打造一个热度排行榜，zrevrangebyscore可以得到以分数倒序排列的序列，zrank可以得到一个成员在该排行榜的位置（是分数正序排列时的位置，如果要获取倒序排列时的位置需要用zcard-zrank）。</p> <p>id 为6001 的新闻点击数加1：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>zincrby hotNews:20190926 <span class="token number">1</span> n6001
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取今天点击最多的15条：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>zrevrange hotNews:20190926 <span class="token number">0</span> <span class="token number">15</span> withscores
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_15-倒排索引"><a href="#_15-倒排索引" class="header-anchor">#</a> 15 .倒排索引</h2> <p>倒排索引是构造搜索功能的最常见方式，在 Redis 中也可以通过set进行建立倒排索引，这里以简单的拼音 + 前缀搜索城市功能举例：</p> <p>假设一个城市北京，通过拼音词库将北京转为beijing，再通过前缀分词将这两个词分为若干个前缀索引，有：北、北京、b、be…beijin和beijing。将这些索引分别作为set的 key（例如:index:北）并存储北京的
id，倒排索引便建立好了。接下来只需要在搜索时通过关键词取出对应的set并得到其中的 id 即可。</p> <h2 id="_16-显示最新的项目列表"><a href="#_16-显示最新的项目列表" class="header-anchor">#</a> 16 .显示最新的项目列表</h2> <p>比如说，我们的一个Web应用想要列出用户贴出的最新20条评论。在最新的评论边上我们有一个“显示全部”的链接，点击后就可以获得更多的评论。</p> <p>每次新评论发表时，我们会将它的ID添加到一个Redis列表。可以限定列表的长度为5000</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>LPUSH latest.comments
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Redis中我们的最新ID使用了常驻缓存，这是一直更新的。但是我们做了限制不能超过5000个ID，因此我们的获取ID函数会一直询问Redis。只有在超出了这个范围的时候，才需要去访问数据库。</p> <ul><li><a href="https://blog.csdn.net/agonie201218/article/details/123640871" target="_blank" rel="noopener noreferrer">原文链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/23/2025, 9:27:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-blog/study-notes/back-end/redis/11.SpringBoot集成Redis/3.RedisTemplate连接集群.html" class="prev">
        RedisTemplate连接集群
      </a></span> <span class="next"><a href="/vuepress-blog/study-notes/back-end/redis/other/redis-install-deployment.html">
        Window下Redis的安装和部署详细图文教程（Redis的安装和可视化工具的使用）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/vuepress-blog/assets/js/app.6697dc51.js" defer></script><script src="/vuepress-blog/assets/js/2.467e751d.js" defer></script><script src="/vuepress-blog/assets/js/1.cda9c0e5.js" defer></script><script src="/vuepress-blog/assets/js/161.f484bb49.js" defer></script><script src="/vuepress-blog/assets/js/59.8ba32256.js" defer></script>
  </body>
</html>
