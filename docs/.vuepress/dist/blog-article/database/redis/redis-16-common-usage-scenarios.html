<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 16 个常见使用场景 | Rui</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vuepress-blog/assets/img/logo.png">
    <link rel="manifest" href="/vuepress-blog/manifest.json">
    <link rel="apple-touch-icon" href="/vuepress-blog/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/vuepress-blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="点点滴滴">
    <meta name="referrer" content="no-referrer">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.681ced2a.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.db8d1f21.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.bde665e9.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.1ff905dd.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/33.5be5fd18.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/20.51598947.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.031ef4d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/100.46973cf4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/101.655b63bc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/102.c69bd05b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/103.3f76b548.js"><link rel="prefetch" href="/vuepress-blog/assets/js/104.badb2a7d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/105.9fe21716.js"><link rel="prefetch" href="/vuepress-blog/assets/js/106.a3a5319b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.37deede4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.0502cf5f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.61d2ea3e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.c1d34315.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.ee63fe6d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.8862a142.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.fac82959.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.6e0359c4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.74602361.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.f90d3ea6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.29ea0e0a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.29c6ac0a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.5366cda5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.28a99409.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.1dc9acbc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.633683ff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.deda8e24.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.60c9f1a8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.db22a1ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.bd7ad4da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.e620e11b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.6c1a8884.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.ad1cf2da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.7872aa5a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.cbaa1282.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.24ee8d2b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.0f55d58b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.0e7d38d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.da81c3e9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.a80d26c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.7f4c313e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.07258802.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.504c3d00.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.48ec9be4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.c045b6f8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.d7b5457f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.5f8ac909.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.3d202583.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.e049139f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.841b10ce.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.a5ae6e8c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.b74ecb0f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.512b84eb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.7581d7c5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.5d43f533.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.82865cae.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.4b5d8936.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.b68e40b7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.5c3cd70f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.70b3702e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.508a846c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.b8603547.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.83022189.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.36440844.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.5066f015.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.5d456b5f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.2d106edc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.10e7ea88.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.ed120a87.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.9e99caa0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.7289b190.js"><link rel="prefetch" href="/vuepress-blog/assets/js/7.9f58c0f5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/70.eee55d4a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.7d02c1a4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/72.c34d8583.js"><link rel="prefetch" href="/vuepress-blog/assets/js/73.8057269f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/74.445599c5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/75.ab62025d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/76.9a291972.js"><link rel="prefetch" href="/vuepress-blog/assets/js/77.29e1d0dd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/78.bde8d294.js"><link rel="prefetch" href="/vuepress-blog/assets/js/79.d2598a64.js"><link rel="prefetch" href="/vuepress-blog/assets/js/80.72f2e56f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/81.3905407e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/82.9b0bf5be.js"><link rel="prefetch" href="/vuepress-blog/assets/js/83.9d46197b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/84.435f349c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/85.b8ef2d76.js"><link rel="prefetch" href="/vuepress-blog/assets/js/86.71f6f197.js"><link rel="prefetch" href="/vuepress-blog/assets/js/87.ca10b0da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/88.129a8176.js"><link rel="prefetch" href="/vuepress-blog/assets/js/89.77220b07.js"><link rel="prefetch" href="/vuepress-blog/assets/js/90.e4a23b2c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/91.78704139.js"><link rel="prefetch" href="/vuepress-blog/assets/js/92.5dd39628.js"><link rel="prefetch" href="/vuepress-blog/assets/js/93.05fe2e79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/94.9723407c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/95.7d281413.js"><link rel="prefetch" href="/vuepress-blog/assets/js/96.35658e39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/97.5414eaad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/98.11936084.js"><link rel="prefetch" href="/vuepress-blog/assets/js/99.de471516.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.7bcd5e47.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.681ced2a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><img src="/vuepress-blog/assets/img/logo.png" alt="Rui" class="logo"> <span class="site-name can-hide">Rui</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/navigation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/vuepress-blog/study-notes/" class="nav-link">
  面经
</a></div><div class="nav-item"><a href="/vuepress-blog/blog-article/" class="nav-link router-link-active">
  博文
</a></div><div class="nav-item"><a href="/vuepress-blog/code-demo/" class="nav-link">
  代码Demo
</a></div><div class="nav-item"><a href="/vuepress-blog/friendly-chain/" class="nav-link">
  友链
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂记" class="mobile-dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/read/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/aboutme/" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/other/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/navigation/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/vuepress-blog/study-notes/" class="nav-link">
  面经
</a></div><div class="nav-item"><a href="/vuepress-blog/blog-article/" class="nav-link router-link-active">
  博文
</a></div><div class="nav-item"><a href="/vuepress-blog/code-demo/" class="nav-link">
  代码Demo
</a></div><div class="nav-item"><a href="/vuepress-blog/friendly-chain/" class="nav-link">
  友链
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂记" class="mobile-dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/read/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/aboutme/" class="nav-link">
  关于
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/other/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/vuepress-blog/blog-article/java/" class="sidebar-heading clickable"><span>Java</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>basic</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>springboot</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/blog-article/database/" class="sidebar-heading clickable router-link-active open"><span>数据库</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>derby</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>navicat</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html" aria-current="page" class="active sidebar-link">Redis 16 个常见使用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_1-缓存" class="sidebar-link">1. 缓存</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_2-数据共享分布式" class="sidebar-link">2. 数据共享分布式</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_3、分布式锁" class="sidebar-link">3、分布式锁</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_4、全局id" class="sidebar-link">4、全局ID</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_5、计数器" class="sidebar-link">5、计数器</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_6、限流" class="sidebar-link">6、限流</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_7、位统计" class="sidebar-link">7、位统计</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_8-时间轴-timeline" class="sidebar-link">8. 时间轴（Timeline）</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_9-消息队列" class="sidebar-link">9. 消息队列</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_10、抽奖" class="sidebar-link">10、抽奖</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_11、点赞、签到、打卡" class="sidebar-link">11、点赞、签到、打卡</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_12-商品标签" class="sidebar-link">12 商品标签</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_13、好友关系、用户关注、推荐模型" class="sidebar-link">13、好友关系、用户关注、推荐模型</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_14-排行榜" class="sidebar-link">14 .排行榜</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_15-倒排索引" class="sidebar-link">15 .倒排索引</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/blog-article/database/redis/redis-16-common-usage-scenarios.html#_16-显示最新的项目列表" class="sidebar-link">16 .显示最新的项目列表</a></li></ul></li><li><a href="/vuepress-blog/blog-article/database/redis/redis-install-deployment.html" class="sidebar-link">Window下Redis的安装和部署详细图文教程（Redis的安装和可视化工具的使用）</a></li><li><a href="/vuepress-blog/blog-article/database/redis/redis-use.html" class="sidebar-link">看完这篇大总结，彻底掌握Redis的使用</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/blog-article/python/" class="sidebar-heading clickable"><span>Python</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/blog-article/mybatis/" class="sidebar-heading clickable"><span>Mybatis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/blog-article/front-end/" class="sidebar-heading clickable"><span>前端</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vuepress-blog/blog-article/drawing-bed/" class="sidebar-heading clickable"><span>图床</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/vuepress-blog/blog-article/other/" class="sidebar-link">其他</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-缓存">1. 缓存</a></li><li><a href="#_2-数据共享分布式">2. 数据共享分布式</a></li><li><a href="#_3、分布式锁">3、分布式锁</a></li><li><a href="#_4、全局id">4、全局ID</a></li><li><a href="#_5、计数器">5、计数器</a></li><li><a href="#_6、限流">6、限流</a></li><li><a href="#_7、位统计">7、位统计</a></li><li><a href="#_8-时间轴-timeline">8. 时间轴（Timeline）</a></li><li><a href="#_9-消息队列">9. 消息队列</a></li><li><a href="#_10、抽奖">10、抽奖</a></li><li><a href="#_11、点赞、签到、打卡">11、点赞、签到、打卡</a></li><li><a href="#_12-商品标签">12 商品标签</a></li><li><a href="#_13、好友关系、用户关注、推荐模型">13、好友关系、用户关注、推荐模型</a></li><li><a href="#_14-排行榜">14 .排行榜</a></li><li><a href="#_15-倒排索引">15 .倒排索引</a></li><li><a href="#_16-显示最新的项目列表">16 .显示最新的项目列表</a></li></ul></div><p></p> <h1 id="redis-16-个常见使用场景"><a href="#redis-16-个常见使用场景" class="header-anchor">#</a> Redis 16 个常见使用场景</h1> <h2 id="_1-缓存"><a href="#_1-缓存" class="header-anchor">#</a> 1. 缓存</h2> <p>DB缓存，减轻DB服务器压力
提高系统响应
作为Key-Value形态的内存数据库，Redis 最先会被想到的应用场景便是作为数据缓存。而使用 Redis 缓存数据非常简单，只需要通过string类型将序列化后的对象存起来即可，不过也有一些需要注意的地方：</p> <p>必须保证不同对象的 key 不会重复，并且使 key 尽量短，一般使用类名（表名）加主键拼接而成。</p> <p>选择一个优秀的序列化方式也很重要，目的是提高序列化的效率和减少内存占用。</p> <p>缓存内容与数据库的一致性，这里一般有两种做法：</p> <p>只在数据库查询后将对象放入缓存，如果对象发生了修改或删除操作，直接清除对应缓存（或设为过期）。
在数据库新增和查询后将对象放入缓存，修改后更新缓存，删除后清除对应缓存（或设为过期）。</p> <h2 id="_2-数据共享分布式"><a href="#_2-数据共享分布式" class="header-anchor">#</a> 2. 数据共享分布式</h2> <p>String 类型，因为 Redis 是分布式的独立服务，可以在多个应用之间共享</p> <p>例如：分布式Session</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>session<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>session<span class="token operator">-</span>data<span class="token operator">-</span>redis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3、分布式锁"><a href="#_3、分布式锁" class="header-anchor">#</a> 3、分布式锁</h2> <p>如今都是分布式的环境下java自带的单体锁已经不适用的。在 Redis 2.6.12 版本开始，string的set命令增加了一些参数：</p> <p>EX：设置键的过期时间（单位为秒）</p> <p>PX：设置键的过期时间（单位为毫秒）</p> <p>NX ：只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。</p> <p>XX ：只在键已经存在时，才对键进行设置操作。</p> <p>由于这个操作是原子性的，可以简单地以此实现一个分布式的锁，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> lock_key locked NX EX <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果这个操作返回false，说明 key
的添加不成功，也就是当前有人在占用这把锁。而如果返回true，则说明得了锁，便可以继续进行操作，并且在操作后通过del命令释放掉锁。并且即使程序因为某些原因并没有释放锁，由于设置了过期时间，该锁也会在 1
秒后自动释放，不会影响到其他程序的运行。</p> <p>推荐使用 redisson 第三方库实现分布式锁。
参考 java分布式锁终极解决方案之 redisson</p> <h2 id="_4、全局id"><a href="#_4、全局id" class="header-anchor">#</a> 4、全局ID</h2> <p>int类型，incrby，利用原子性</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>incrby userid <span class="token number">1000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>分库分表的场景，一次性拿一段</p> <h2 id="_5、计数器"><a href="#_5、计数器" class="header-anchor">#</a> 5、计数器</h2> <p>int类型，incr方法</p> <p>例如：文章的阅读量、微博点赞数、允许一定的延迟，先写入Redis再定时同步到数据库</p> <p>计数功能应该是最适合 Redis 的使用场景之一了，因为它高频率读写的特征可以完全发挥 Redis 作为内存数据库的高效。在 Redis 的数据结构中，string、hash和sorted
set都提供了incr方法用于原子性的自增操作，下面举例说明一下它们各自的使用场景：</p> <p>如果应用需要显示每天的注册用户数，便可以使用string作为计数器，设定一个名为REGISTERED_COUNT_TODAY的 key，并在初始化时给它设置一个到凌晨 0 点的过期时间，每当用户注册成功后便使用incr命令使该 key 增长
1，同时当每天凌晨 0 点后，这个计数器都会因为 key 过期使值清零。
每条微博都有点赞数、评论数、转发数和浏览数四条属性，这时用hash进行计数会更好，将该计数器的 key 设为weibo:weibo_id，hash的 field
为like_number、comment_number、forward_number和view_number，在对应操作后通过hincrby使hash 中的 field 自增。
如果应用有一个发帖排行榜的功能，便选择sorted set吧，将集合的 key 设为POST_RANK。当用户发帖后，使用zincrby将该用户 id 的 score 增长 1。sorted
set会重新进行排序，用户所在排行榜的位置也就会得到实时的更新。</p> <h2 id="_6、限流"><a href="#_6、限流" class="header-anchor">#</a> 6、限流</h2> <p>int类型，incr方法</p> <p>以访问者的ip和其他信息作为key，访问一次增加一次计数，超过次数则返回false</p> <h2 id="_7、位统计"><a href="#_7、位统计" class="header-anchor">#</a> 7、位统计</h2> <p>String类型的bitcount（1.6.6的bitmap数据结构介绍）</p> <p>字符是以8位二进制存储的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> k1 a
setbit k1 <span class="token number">6</span> <span class="token number">1</span>
setbit k1 <span class="token number">7</span> <span class="token number">0</span>
get k1
/* <span class="token number">6</span> <span class="token number">7</span> 代表的a的二进制位的修改
a 对应的ASCII码是97，转换为二进制数据是01100001
b 对应的ASCII码是98，转换为二进制数据是01100010

因为bit非常节省空间（1 <span class="token assign-left variable">MB</span><span class="token operator">=</span><span class="token number">8388608</span> bit），可以用来做大数据量的统计。
*/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>参考 <a href="https://blog.csdn.net/agonie201218/article/details/107161106" target="_blank" rel="noopener noreferrer">使用Redis的bitmaps统计用户留存率、活跃用户<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/agonie201218/article/details/108988577" target="_blank" rel="noopener noreferrer">用户日活月活怎么统计 - Redis HyperLogLog 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_8-时间轴-timeline"><a href="#_8-时间轴-timeline" class="header-anchor">#</a> 8. 时间轴（Timeline）</h2> <p>list作为双向链表，不光可以作为队列使用。如果将它用作栈便可以成为一个公用的时间轴。当用户发完微博后，都通过lpush将它存放在一个 key 为LATEST_WEIBO的list中，之后便可以通过lrange取出当前最新的微博。</p> <h2 id="_9-消息队列"><a href="#_9-消息队列" class="header-anchor">#</a> 9. 消息队列</h2> <p>Redis 中list的数据结构实现是双向链表，所以可以非常便捷的应用于消息队列（生产者 / 消费者模型）。消息的生产者只需要通过lpush将消息放入
list，消费者便可以通过rpop取出该消息，并且可以保证消息的有序性。如果需要实现带有优先级的消息队列也可以选择sorted set。而pub/sub功能也可以用作发布者 / 订阅者模型的消息。无论使用何种方式，由于 Redis
拥有持久化功能，也不需要担心由于服务器故障导致消息丢失的情况。</p> <p>List提供了两个阻塞的弹出操作：blpop/brpop，可以设置超时时间</p> <p>blpop：blpop key1 timeout 移除并获取列表的第一个元素，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
brpop：brpop key1 timeout 移除并获取列表的最后一个元素，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
上面的操作。其实就是java的阻塞队列。学习的东西越多。学习成本越低</p> <p>队列：先进先除：rpush blpop，左头右尾，右边进入队列，左边出队列
栈：先进后出：rpush brpop</p> <h2 id="_10、抽奖"><a href="#_10、抽奖" class="header-anchor">#</a> 10、抽奖</h2> <p>利用set结构的无序性,通过 Spop（ Redis Spop 命令用于移除集合中的指定 key 的一个或多个随机元素，移除后会返回移除的元素。 ） 随机获得值</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;three&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SPOP myset
<span class="token string">&quot;one&quot;</span>
redis<span class="token operator">&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
   redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;four&quot;</span>
   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
   redis<span class="token operator">&gt;</span> SADD myset <span class="token string">&quot;five&quot;</span>
   <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
   redis<span class="token operator">&gt;</span> SPOP myset <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;five&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
   redis<span class="token operator">&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
   redis<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_11、点赞、签到、打卡"><a href="#_11、点赞、签到、打卡" class="header-anchor">#</a> 11、点赞、签到、打卡</h2> <p>假如上面的微博ID是t1001，用户ID是u3001</p> <p>用 like:t1001 来维护 t1001 这条微博的所有点赞用户</p> <ol><li>点赞了这条微博：sadd like:t1001 u3001</li> <li>取消点赞：srem like:t1001 u3001</li> <li>是否点赞：sismember like:t1001 u3001</li> <li>点赞的所有用户：smembers like:t1001</li> <li>点赞数：scard like:t1001
是不是比数据库简单多了。</li></ol> <h2 id="_12-商品标签"><a href="#_12-商品标签" class="header-anchor">#</a> 12 商品标签</h2> <p>老规矩，用 tags:i5001 来维护商品所有的标签。</p> <ol><li>sadd tags:i5001 画面清晰细腻</li> <li>sadd tags:i5001 真彩清晰显示屏</li> <li>sadd tags:i5001 流程至极</li></ol> <h2 id="_13、好友关系、用户关注、推荐模型"><a href="#_13、好友关系、用户关注、推荐模型" class="header-anchor">#</a> 13、好友关系、用户关注、推荐模型</h2> <p>这个场景最开始是是一篇介绍微博 Redis 应用的 PPT 中看到的，其中提到微博的 Redis 主要是用在在计数和好友关系两方面上，当时对好友关系方面的用法不太了解，后来看到《Redis 设计与实现》中介绍到作者最开始去使用 Redis
便是希望能通过set解决传统数据库无法快速计算集合中交集这个功能。后来联想到微博当前的业务场景，确实能够以这种方式实现，所以姑且猜测一下：</p> <p>对于一个用户 A，将它的关注和粉丝的用户 id 都存放在两个 set 中：</p> <ol><li>A:follow：存放 A 所有关注的用户 id</li> <li>A:follower：存放 A 所有粉丝的用户 id</li></ol> <p>那么通过sinter命令便可以根据A:follow和A:follower的交集得到与 A 互相关注的用户。当 A 进入另一个用户 B 的主页后，A:follow和B:follow的交集便是 A 和 B 的共同专注，A:follow和B:
follower的交集便是 A 关注的人也关注了 B。</p> <p>举例
follow 关注 fans 粉丝</p> <p>相互关注：</p> <ol><li><p>sadd 1:follow 2</p></li> <li><p>sadd 2:fans 1</p></li> <li><p>sadd 1:fans 2</p></li> <li><p>sadd 2:follow 1
我关注的人也关注了他(取交集)：</p></li> <li><p>sinter 1:follow 2:fans
可能认识的人：</p></li> <li><p>用户1可能认识的人(差集)：sdiff 2:follow 1:follow</p></li> <li><p>用户2可能认识的人：sdiff 1:follow 2:follow</p></li></ol> <h2 id="_14-排行榜"><a href="#_14-排行榜" class="header-anchor">#</a> 14 .排行榜</h2> <p>使用sorted set(有序set)
和一个计算热度的算法便可以轻松打造一个热度排行榜，zrevrangebyscore可以得到以分数倒序排列的序列，zrank可以得到一个成员在该排行榜的位置（是分数正序排列时的位置，如果要获取倒序排列时的位置需要用zcard-zrank）。</p> <p>id 为6001 的新闻点击数加1：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>zincrby hotNews:20190926 <span class="token number">1</span> n6001
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取今天点击最多的15条：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>zrevrange hotNews:20190926 <span class="token number">0</span> <span class="token number">15</span> withscores
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_15-倒排索引"><a href="#_15-倒排索引" class="header-anchor">#</a> 15 .倒排索引</h2> <p>倒排索引是构造搜索功能的最常见方式，在 Redis 中也可以通过set进行建立倒排索引，这里以简单的拼音 + 前缀搜索城市功能举例：</p> <p>假设一个城市北京，通过拼音词库将北京转为beijing，再通过前缀分词将这两个词分为若干个前缀索引，有：北、北京、b、be…beijin和beijing。将这些索引分别作为set的 key（例如:index:北）并存储北京的
id，倒排索引便建立好了。接下来只需要在搜索时通过关键词取出对应的set并得到其中的 id 即可。</p> <h2 id="_16-显示最新的项目列表"><a href="#_16-显示最新的项目列表" class="header-anchor">#</a> 16 .显示最新的项目列表</h2> <p>比如说，我们的一个Web应用想要列出用户贴出的最新20条评论。在最新的评论边上我们有一个“显示全部”的链接，点击后就可以获得更多的评论。</p> <p>每次新评论发表时，我们会将它的ID添加到一个Redis列表。可以限定列表的长度为5000</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>LPUSH latest.comments
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Redis中我们的最新ID使用了常驻缓存，这是一直更新的。但是我们做了限制不能超过5000个ID，因此我们的获取ID函数会一直询问Redis。只有在超出了这个范围的时候，才需要去访问数据库。</p> <ul><li><a href="https://blog.csdn.net/agonie201218/article/details/123640871" target="_blank" rel="noopener noreferrer">原文链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/11/2024, 5:28:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-blog/blog-article/database/navicat/navicat-install.html" class="prev">
        Navicat Premium 16安装教程
      </a></span> <span class="next"><a href="/vuepress-blog/blog-article/database/redis/redis-install-deployment.html">
        Window下Redis的安装和部署详细图文教程（Redis的安装和可视化工具的使用）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/vuepress-blog/assets/js/app.db8d1f21.js" defer></script><script src="/vuepress-blog/assets/js/2.bde665e9.js" defer></script><script src="/vuepress-blog/assets/js/1.1ff905dd.js" defer></script><script src="/vuepress-blog/assets/js/33.5be5fd18.js" defer></script><script src="/vuepress-blog/assets/js/20.51598947.js" defer></script>
  </body>
</html>
