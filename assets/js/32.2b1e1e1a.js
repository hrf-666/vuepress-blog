(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{430:function(t,s,e){t.exports=e.p+"assets/img/41.获取缩容结点.ab2a1f80.png"},431:function(t,s,e){t.exports=e.p+"assets/img/42.删除从节点.d8d1e65a.png"},432:function(t,s,e){t.exports=e.p+"assets/img/43.查询节点ID.c7188be5.png"},433:function(t,s,e){t.exports=e.p+"assets/img/44.删除节点槽位分配.27fcd49b.png"},434:function(t,s,e){t.exports=e.p+"assets/img/45.集群缩容第二次检查.10060bc8.png"},435:function(t,s,e){t.exports=e.p+"assets/img/46.从节点删除.c2b55acd.png"},436:function(t,s,e){t.exports=e.p+"assets/img/47.集群缩容彻底删除.2d037e25.png"},807:function(t,s,e){"use strict";e.r(s);var a=e(2),r=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"主从缩容案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主从缩容案例"}},[t._v("#")]),t._v(" 主从缩容案例")]),t._v(" "),s("h3",{attrs:{id:"目的-6387和6388下线"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的-6387和6388下线"}},[t._v("#")]),t._v(" 目的：6387和6388下线")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("检查集群情况第一次，先获得从节点6388的节点ID")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.174:6388")])])]),t._v(" "),s("p",[s("img",{attrs:{src:e(430),alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("从集群中将4号结点6388删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster del-node 192.168.111.174:6388 218e7b8b4f81be54ff173e4776b4f4faaf7c13da")]),t._v(" "),s("p",[s("img",{attrs:{src:e(431),alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("将6387的槽号清空，重新分配，本例将清出来的槽号都给6381")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster reshard 192.168.111.175:6381")]),t._v(" "),s("p",[s("img",{attrs:{src:e(432),alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:e(433),alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("检查集群情况第二次")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.175:6381")]),t._v(" "),s("p",[t._v("4096个槽位都指给6381，它变成了8192个槽位，相当于全部都给6381了，不然要输入三次 Source node")]),t._v(" "),s("p",[s("img",{attrs:{src:e(434),alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("将6387删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster del-node 192.168.111.174:6387 307a5f6617a6eeb4949f3cb9124ed04c6962c348")]),t._v(" "),s("p",[s("img",{attrs:{src:e(435),alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("检查集群情况第三次 6387/6388被彻底删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.174:6381")]),t._v(" "),s("p",[s("img",{attrs:{src:e(436),alt:""}})])])])])}),[],!1,null,null,null);s.default=r.exports}}]);